spring.application.name=avangrid-backend
server.port=8080

# =====================================================
# AZURE STORAGE (SERVICE PRINCIPAL AUTH)
# =====================================================
azure.storage.account-name=${AZURE_STORAGE_ACCOUNT}
azure.storage.container-name=${AZURE_STORAGE_CONTAINER}
azure.client-id=${AZURE_CLIENT_ID}
azure.tenant-id=${AZURE_TENANT_ID}
azure.client-secret=${AZURE_CLIENT_SECRET}



# =====================================================
# JPA COMMON CONFIG
# =====================================================
spring.jpa.show-sql=true
spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=false

# =====================================================
# MULTI DB (CMP / NYSEG / RGE)
# =====================================================
datasource.cmp.jdbc-url=${CMP_DB_URL}
datasource.cmp.username=${CMP_DB_USERNAME}
datasource.cmp.password=${CMP_DB_PASSWORD}
datasource.cmp.driver-class-name=org.postgresql.Driver

datasource.nyseg.jdbc-url=${NYSEG_DB_URL}
datasource.nyseg.username=${NYSEG_DB_USERNAME}
datasource.nyseg.password=${NYSEG_DB_PASSWORD}
datasource.nyseg.driver-class-name=org.postgresql.Driver

datasource.rge.jdbc-url=${RGE_DB_URL}
datasource.rge.username=${RGE_DB_USERNAME}
datasource.rge.password=${RGE_DB_PASSWORD}
datasource.rge.driver-class-name=org.postgresql.Driver

# Connection pools (same everywhere)
datasource.cmp.hikari.maximum-pool-size=2
datasource.cmp.hikari.minimum-idle=1
datasource.nyseg.hikari.maximum-pool-size=2
datasource.nyseg.hikari.minimum-idle=1
datasource.rge.hikari.maximum-pool-size=2
datasource.rge.hikari.minimum-idle=1

# Jackson hardening
spring.jackson.mapper.allow-coercion-of-scalars=false
spring.jackson.deserialization.accept-single-value-as-array=false
spring.jackson.deserialization.fail-on-null-for-primitives=true
spring.jackson.deserialization.fail-on-numbers-for-enums=true

# CORS (frontend injected per env)
cors.allowed-origins=${FRONTEND_URL:http://localhost:3000}



# Logging defaults
logging.level.org.springframework.web=INFO

datasource.cmp.enabled=true
datasource.nyseg.enabled=false
datasource.rge.enabled=false

spring.profiles.default=${SPRING_PROFILES_ACTIVE}

